<div class="c-d-container">
    <div *ngIf="showLoader" class="loader-parent">
        <img src="assets/gif/loader.gif">
    </div>
    <form [formGroup]="createForm" class="form">
        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="attr_bus_requirement">Business Requirement </label>
            </div>
            <div class="input form-input">
                <input type="text"
                    style="font-family: 'Poppins';border-radius:4px;width: 97%;height: 35px; border: 1px solid #438ce7; border-left-width: 3px;outline: none;padding-left: 10px; "
                    id="attr_bus_requirement" formControlName="attr_bus_requirement">
            </div>
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="attribute_title_en">Name (EN)</label>
            </div>
            <div class="input form-input">
                <input class="ip-field" type="text" style="border-left-width: 2px;border-left-color: #438ce7;" id="attr_bus_requirement" formControlName="attribute_title_en">
            </div>
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="attribute_title_fr">Name (FR)</label>
            </div>
            <div class="input form-input">
                <input class="ip-field" type="text" style="border-left-width: 2px;border-left-color: #438ce7;" id="attribute_title_fr" formControlName="attribute_title_fr">
            </div>
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="description">Description (EN)</label>
            </div>
            <div class="input form-input">
                <div class="desc-f-row  d-flex">
                    <textarea class="description" style="border-left-width: 2px;border-left-color: #438ce7;" id="attribute_description_en" formControlName="attribute_description_en"></textarea>
                    <div class="desc-input-gap"></div>
                    <textarea class="description" formControlName="attribute_description_fr"></textarea>
                </div>
                
            </div>
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="attribute_other_info">Other Info</label>
            </div>
            <div class="input form-input">
                <input type="text" class="ip-field ip-other-info" formControlName="attribute_other_info" id="att_other_info">
            </div>
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="repeating_attribute">Repeating Attribute</label>
            </div>
            <div class="row f-rep-att d-flex">
                <select class="sel-small-field rep-att-field" [(ngModel)]="repAttVal" [ngModelOptions]="{standalone: true}" id="repeating_attribute">
                    <option selected value="false">No</option>
                    <option value="true">Yes</option>
                </select>
    
                <div class="form-input-gap" style="width: 4%;"></div>
    
                <div class="label form-label" style="width: 14%;">
                    <label for="code_list_name">Code List Name</label>
                </div>
                <select class="sel-small-field code-li-name" formControlName="code_list_name" id="code_list_name">
                    <option value="" selected disabled hidden>N/A</option>
                    <option value="option1">Option 1</option>
                    <option value="option2">Option 2</option>
                    <option value="option3">Option 3</option>
                </select>
    
                <div class="form-input-gap" style="width: 4%;"></div>
    
                <div class="label form-label" style="width: 11%;">
                    <label for="code_value">Code Value</label>
                </div>
                <select class="sel-small-field code-val" formControlName="code_value" id="code_value">
                    <option value="option1">Option 1</option>
                    <option value="option2">Option 2</option>
                    <option value="option3">Option 3</option>
                </select>
                <!-- <mat-icon style="color: #438ce7;padding: 2px;font-size: 30px;margin-left: 5px;">content_paste_go</mat-icon> -->
                <img class="help-image" style="width: 30px;" src="assets/icons/Group 536.svg">
            </div>
            
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="min_value">Min Value</label>
            </div>
            <div class="row f-rep-att d-flex">
                <input type="number" class="sel-small-field f-min-val" formControlName="min_value" id="min_value">
            
                <div class="form-input-gap" style="width: 6.5%;"></div>
            
                <div class="label form-label" style="width: 12%;">
                    <label for="max_value">Max Value</label>
                </div>
                <input type="number" class="sel-small-field f-max-val" formControlName="max_value" id="max_value">
            
                <div class="form-input-gap" style="width: 6.5%;"></div>
            
                <div class="label form-label" style="width: 12%;">
                    <label for="data_type">Data Type</label>
                </div>
                <select class="sel-small-field f-d-type" formControlName="data_type" id="data_type">
                    <option value="Number" selected>Number</option>
                    <option value="String">String</option>
                </select>
            </div>

        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="link_module">Link Module</label>
            </div>
            <div class="input form-input" style="position: relative;">
                <input type="text" class="i-box-normal" [(ngModel)]="moduleName" [ngModelOptions]="{standalone: true}" (keyup)="onKeyUp($event,'linkModule')">
                <div class="sel-fil-div" [ngClass]="{'sel-fil-div-visible': filteredItemsLM.length >= 1, 'sel-fil-div-hidden': filteredItemsLM.length < 1}">
                    <div class="sel-fil-item" (click)="selectModule(item,'linkModule')" *ngFor="let item of filteredItemsLM">
                        {{ item.module_name }}
                    </div>
                </div>               
            </div>
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="link_sub_module">Link Sub Module </label>
            </div>
            <div class="input form-input" style="position: relative;">
                <input type="text" class="i-box-normal" [(ngModel)]="subModuleName" [ngModelOptions]="{standalone: true}" (keyup)="onKeyUp($event,'linkSubModule')">
                <div class="sel-fil-div" [ngClass]="{'sel-fil-div-visible': filteredItemsLSM.length >= 1, 'sel-fil-div-hidden': filteredItemsLSM.length < 1}">
                    <div class="sel-fil-item" (click)="selectModule(item,'linkSubModule')" *ngFor="let item of filteredItemsLSM">
                        {{ item }}
                    </div>
                </div>               
            </div>
        </div>

        <div class="row form-single-row d-flex" *ngIf="repAttVal==='true'">
            <div class="label form-label">
                <label for="attribute_repeatability">Repeatability</label>
            </div>

            <div class="form-input">
                <mat-radio-group [(ngModel)]="selectedRadio" [ngModelOptions]="{standalone: true}" (change)="radioChange($event)" style="width: 100%; display: flex;">
                    <mat-radio-button value="Self" style="width: 32%; border-color:  #438ce7 !important;" checked>Self Repeating</mat-radio-button>
                    <!-- <div class="form-input-gap" style="width: 2%;"></div> -->
                    <mat-radio-button value="Group" style="width: 32%;">Group Repeating</mat-radio-button>
                </mat-radio-group>
            </div>
            
        </div>

        <!-- <div class="row form-single-row d-flex">
            <div class="label form-label">
            </div>
            <div class="input form-input" style="position: relative;">
                <input type="text" class="input-field f-search-data" [(ngModel)]="searchData" [ngModelOptions]="{standalone: true}" id="search_data">
                <img class="search-icon" style="width: 18px; height: 17px;" src="assets/icons/Icon feather-search.svg">
            </div>
        </div> -->

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="is_dependent_attribute">Dependent</label>
            </div>
            <div class="row f-is-dep d-flex">
                <select formControlName="is_dependent_attribute" class="ip-field f-is-dep-sel f-li-mod" id="is_dependent_attribute">
                    <option value="true" selected>Yes</option>
                    <option value="false">No</option>
                </select>
            </div>
            
        </div>

        <div class="row form-single-row d-flex">
            <div class="label form-label">
                <label for="dependent_attributes ">Dependent Attributes </label>
            </div>
            <div class="input form-input" style="position: relative;">
                <input type="text" class="ip-field f-search-data" id="dependent_attributes" [(ngModel)]="selectedAttribute" [ngModelOptions]="{standalone: true}" (keyup)="onKeyUpDepAttr($event)">
                <!-- <mat-icon class="search-icon">search</mat-icon> -->
                <img class="help-image search-icon" style="width: 18px; height: 17px;" src="assets/icons/Icon feather-search.svg">
                <div class="sel-fil-div" [ngClass]="{'sel-fil-div-visible': attributesArray.length >= 1, 'sel-fil-div-hidden': attributesArray.length < 1}">
                    <div class="sel-fil-item" (click)="selectAttribute(item)" *ngFor="let item of attributesArray">
                        {{ item.attribute_title_en }}
                    </div>
                </div>  
            </div>
        </div>

        <!-- Add more form controls as needed -->
    </form>
    <div class="att-cards-container d-flex">
        <mat-card *ngFor="let item of attributesListArray" class="att-card">
            <mat-card-content class="att-card-content d-flex">
                <mat-label class="mat-label-att-item">{{ item.attribute_title_en }}</mat-label>
                <div class="mat-icon-box-att-item d-flex">
                    <mat-icon class="mat-icon-att-item" (click)="removeAttribute(item)">close</mat-icon>
                </div>
                  
            </mat-card-content>
        </mat-card>
    </div>
</div>